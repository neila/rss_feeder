name: RSS feed
on: [push, workflow_dispatch]

jobs:
  fetch:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 1
      matrix:
        feedUrls:
          [
            "http://feeds.bbci.co.uk/news/world/rss.xml",
            "https://www.nytimes.com/svc/collections/v1/publish/https://www.nytimes.com/section/world/rss.xml",
            "http://www.aljazeera.com/xml/rss/all.xml",
            "https://www.e-ir.info/feed/",
          ]

    steps:
      - name: feed update
        uses: lwojcik/github-action-feed-to-social-media@v2.4.1
        with:
          # base config
          feedUrl: ${{ matrix.feedUrls }}
          newestItemStrategy: "latestDate"
          postFormat: "{title} - {link}\n{description}\n{pubDate}"
          # Discord settings
          discordEnable: true
          discordPostFormat: "<@709878421273968772> **{title}**\n{link}\n\n{description}\n\n{pubDate}"
          discordWebhookUrl: "https://discord.com/api/webhooks/1223212073203269722/CPHMmAtiMZ0UL0Koeyf1KI5MyDzm3Y4feLt623DmGoN4xoh9--eQEG0GXbPr0ZZ1ZMuN?thread_id=1223241787645235240"
